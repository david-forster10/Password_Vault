package com.example.FirstRun;

import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.event.ActionListener;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;

import javax.swing.Box;
import javax.swing.BoxLayout;
import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;

import com.example.Global.Global_Vars;

public class FirstTimeRun extends JPanel 
{
	private static final long serialVersionUID = 1L;

	public FirstTimeRun()
	{
	}
	
	public FirstTimeRun(ActionListener val, Global_Vars gb)
	{
		gv = gb;
		initComponents(val);
	}

	private void initComponents(ActionListener val) // method to build initial view for user for installation
	{
		// instantiating elements of the GUI
		pnlStart = new JPanel[6];
		lblMain = new JLabel();
		lblTextPrompt = new JLabel();
		gv.txtAccNum = new JTextField();
		btnNext = new JButton();
		btnExit = new JButton();

		for (int i = 0; i < 6; i++)
			pnlStart[i] = new JPanel();

		lblTextPrompt.setText("Amount of accounts (1-10):");
		lblTextPrompt.setFont(lblMain.getFont().deriveFont(16.0f));
		lblTextPrompt.setBounds(166, 190, 198, 18);
		lblTextPrompt.setLabelFor(gv.txtAccNum);
		pnlStart[2].setLayout(new FlowLayout());
		pnlStart[2].add(lblTextPrompt);

		gv.txtAccNum.setFont(lblMain.getFont());
		gv.txtAccNum.setPreferredSize(new Dimension(50, 26));
		gv.txtAccNum.addKeyListener(new KeyAdapter() 
		{
			public void keyTyped(KeyEvent e) 
			{
				if (gv.txtAccNum.getText().length() >= 4 && e.getKeyChar() != '\b' && gv.txtAccNum.getSelectedText() == null) // limit textfield to 4 characters, allows overwriting highlighted text & use of backspace
					e.consume();
			}
		});
		gv.txtAccNum.addActionListener(val);
		pnlStart[2].setLayout(new FlowLayout());
		pnlStart[3].add(pnlStart[2]);
		pnlStart[3].add(gv.txtAccNum);
		pnlStart[3].add(Box.createHorizontalStrut(20));
		
		btnNext.setText("Next"); // adding text to button for starting
		btnNext.setFont(btnExit.getFont()); //setting font size
		btnNext.setPreferredSize(new Dimension(80, 35)); //positioning start button
		btnNext.addActionListener(val);
		pnlStart[5].add(Box.createHorizontalStrut(385));
		pnlStart[5].add(btnNext); // adding button to JFrame
		pnlStart[5].add(Box.createHorizontalStrut(1));
		
		setLayout(new BoxLayout(this, BoxLayout.PAGE_AXIS));
		add(pnlStart[3]);
		add(Box.createVerticalStrut(55));

		add(pnlStart[5]);
		add(Box.createVerticalStrut(15));

		gv.txtAccNum.requestFocusInWindow(); // setting focus on start button when everything is loaded
	}

	// objects used in UI
	private JPanel[] pnlStart;
	private JLabel lblMain;
	private JLabel lblTextPrompt;
	private JButton btnNext;
	private JButton btnExit;
	
	// declaring required classes
	Global_Vars gv = null;
}