package Password_Vault;

import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.util.Scanner;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class FirstTimeRun 
{
	public void firstRun()
	{
		try
		{
			Process p = Runtime.getRuntime().exec("cmd /c tasklist /v /fi \"WINDOWTITLE eq Password_Vault 1.0 Setup\"");
			BufferedReader proc = new BufferedReader(new InputStreamReader(p.getInputStream()));
			
			String i = "";
			while ((i = proc.readLine()) != null)
			{
				if (!i.equals("INFO: No tasks are running which match the specified criteria."))
				{
					Thread.sleep(2000);
					System.exit(0);
				}
			}
		}
		catch (Throwable t)
		{
			t.printStackTrace();
		}
		
		String temp = "";
		System.out.println("First Time Setup:\n");
		System.out.println("How many accounts would you like to create? (accounts can be created at a later point, max number of accounts is 10)");
		
		Pattern p = Pattern.compile("[0-9]");
		Matcher match = p.matcher((temp = userInput.nextLine()));
		
		while (!match.matches() || Integer.parseInt(temp) > 10)
		{
			System.out.println("Invalid response, please try again");
			match = p.matcher((temp = userInput.nextLine()));
		}
	}
	private static Scanner userInput = new Scanner(System.in);
}
